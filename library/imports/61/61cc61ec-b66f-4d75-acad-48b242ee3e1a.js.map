{"version":3,"sources":["../../../../../assets/resources/scripts/assets/resources/scripts/bullet.js"],"names":["cc","Class","extends","Component","properties","range","default","displayName","tooltip","type","serializable","player","onLoad","flyDuration","flyAction","setFlyAction","fly","node","runAction","moveBy","p","callback","callFunc","onBulletHitOrDisappeared","sequence","target","bulletPool","bulletPoolMap","put"],"mappings":";;;;;;AAAA;;;AAGAA,GAAGC,KAAH,CAAS;AACPC,WAASF,GAAGG,SADL;;AAGPC,cAAY;AACVC,WAAO;AACLC,eAAS,GADJ;AAELC,mBAAa,IAFR;AAGLC,eAAS;AAHJ,KADG;AAMVC,UAAM;AACJH,eAAS,CADL;AAEJI,oBAAc;AAFV,KANI;AAUVC,YAAQ;AACNL,eAAS,IADH;AAENI,oBAAc;AAFR;AAVE,GAHL;;AAmBPE,QAnBO,oBAmBE;AACP;AACA,SAAKC,WAAL,GAAmB,GAAnB;AACA,SAAKC,SAAL,GAAiB,KAAKC,YAAL,EAAjB;AACD,GAvBM;;;AAyBP;AACAC,KA1BO,iBA0BD;AACJ,SAAKC,IAAL,CAAUC,SAAV,CAAoB,KAAKJ,SAAzB;AACD,GA5BM;;;AA8BP;AACAC,cA/BO,0BA+BQ;AACb,QAAIC,MAAMhB,GAAGmB,MAAH,CAAU,KAAKN,WAAf,EAA4Bb,GAAGoB,CAAH,CAAK,CAAL,EAAQ,KAAKf,KAAb,CAA5B,CAAV;AACA,QAAIgB,WAAWrB,GAAGsB,QAAH,CAAY,KAAKC,wBAAjB,EAA2C,IAA3C,CAAf;AACA,WAAOvB,GAAGwB,QAAH,CAAYR,GAAZ,EAAiBK,QAAjB,CAAP;AACD,GAnCM;;AAoCP;AACAE,0BArCO,oCAqCkBE,MArClB,EAqC0B;AAC/B,QAAIC,aAAa,KAAKf,MAAL,CAAY,KAAKA,MAAL,CAAYgB,aAAZ,CAA0B,KAAKlB,IAA/B,CAAZ,CAAjB;AACAiB,eAAWE,GAAX,CAAeH,MAAf;AACD;AAxCM,CAAT","file":"bullet.js","sourceRoot":"../../../../../assets/resources/scripts","sourcesContent":["/**\n * 子弹行为组件\n */\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    range: {\n      default: 600,\n      displayName: \"射程\",\n      tooltip: \"子弹射出后开始消亡的距离（px）\"\n    },\n    type: {\n      default: 0,\n      serializable: false\n    },\n    player: {\n      default: null,\n      serializable: false\n    }\n  },\n\n  onLoad() {\n    // 计算子弹飞行时长（射速 射程）s\n    this.flyDuration = 0.5;\n    this.flyAction = this.setFlyAction();\n  },\n\n  // 执行子弹飞行动作\n  fly() {\n    this.node.runAction(this.flyAction);\n  },\n\n  // 定义子弹飞行的动作\n  setFlyAction() {\n    let fly = cc.moveBy(this.flyDuration, cc.p(0, this.range));\n    let callback = cc.callFunc(this.onBulletHitOrDisappeared, this);\n    return cc.sequence(fly, callback);\n  },\n  // 当子弹击中或消失时\n  onBulletHitOrDisappeared(target) {\n    let bulletPool = this.player[this.player.bulletPoolMap[this.type]];\n    bulletPool.put(target);\n  }\n});\n"]}